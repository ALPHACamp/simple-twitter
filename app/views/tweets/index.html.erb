<div class="col-md-8">
  <%= form_for [@tweet] do |f| %>
    <div class="form_group">
      <%= f.text_area :description, maxlength: 140, placeholder: "tweet here!", class: "form-control" %>
    </div>
    <div class="form_group">
      <%= f.submit class: "btn btn-primary" %>
      <%= f.button "Cancel", type: :reset, class: "btn btn-default" %>
    </div>
  <% end %>

  <% @tweets.each do |tweet| %>
    <%= image_tag tweet.user.avatar, style: 'max-height: 140px',  class: "img-responsive img-circle" %>
    <h5><%= link_to tweet.user.name, tweets_user_path(tweet.user) %>, <%= tweet.created_at %></h5>
    <p><%= tweet.description %></p>
    <h5>
      <%= link_to tweet_replies_path(tweet) do %>
      Reply(<%= tweet.replies.size %>)
      <% end %>
      Like(<%= tweet.likes_count %>)
    </h5>
    <% if current_user.liked_tweets?(tweet) %>
        <%= link_to 'Unlike', unlike_tweet_path(tweet), method: :post, class: "btn btn-warning" %>
      <% else %>
        <%= link_to 'Like', like_tweet_path(tweet), method: :post, class: "btn btn-success" %>
      <% end %>
  <% end %>
</div>

<div class="col-md-4">
  <h4>Popular</h4>
  <% @users.each do |user| %>
    <%= image_tag user.avatar, style: 'max-height: 140px', class: "img-responsive img-circle" %>
    <h5><%= link_to user.name, tweets_user_path(user) %>, <%= user.followers_count %></h5>
    <p><%= user.introduction %></p>
    <% if user != current_user %>
      <% if current_user.following?(user) %>
        <%= link_to 'Unfollow', followship_path(user), method: :delete, class: "btn btn-warning" %>
      <% else %>
        <%= link_to 'Follow', followships_path(following_id: user), method: :post, class: "btn btn-success" %>
      <% end %>
    <% end %>
  <% end %>
</div>