<h1>推特前台</h1>


<%= link_to 'New Tweet', new_tweet_path, class: "btn btn-primary" %>

<ul>
  <% @tweets.each do |tweet| %>
    <li>
      <%= link_to tweet.user.name, tweets_user_path(tweet.user), class: "btn btn-primary" %>
      <%= tweet.description %>
      <%= tweet.created_at %>
      <%= link_to "Reply(#{tweet.replies.count})" , tweet_replies_path(tweet), class: "btn btn-primary" %> 

      <% if tweet.is_liked?(current_user) %>
        <%= link_to 'Unlike', unlike_tweet_path(tweet), method: :post, class: "btn btn-info" %>
      <% else %>
        <%= link_to 'Like', like_tweet_path(tweet), method: :post, class: "btn btn-primary" %>
      <% end %>

    </li>
  <% end %>
</ul>

<h1>popular</h1>
<ul>
  <% @users.each do |user| %>
    <li>
      <img class="img-circle" src="http://via.placeholder.com/60x60">
      <%= link_to user.name, tweets_user_path(user), class: "btn btn-primary" %>
      <%= user.introduction %>

      <% if user.email == current_user.email %>
        <%= link_to 'Edit Profile', edit_user_path(user), class: "btn btn-primary" %>
      <% else %>
        <% if current_user.following?(user)%>
          <!-- 會用 DELETE 動作導向 http://localhost:3000/followships/{user.id} -->
          <%= link_to 'Unfollow', followship_path(user), method: :delete ,class: "btn btn-link" %>
        <% else %>
          <!-- 會用 POST 動作導向 http://localhost:3000/followships?following_id={user.id} -->
          <%= link_to 'Follow', followships_path(following_id: user), method: :post , class: "btn btn-default" %>
        <% end %>
      <% end %>
    </li>
  <% end %>
</ul>