<div class="row justify-content-center mt-5">
  <div class="col-sm-3 col-12">
    <%= render 'shared/user_profile' %>
  </div>
  <div class="col-sm-9 col-12">
    <h3>Tweet</h3>
    <div class="card">
      <div class="card-body">
        <h5 class="card-title">
          <%= link_to tweets_user_path(@tweet.user.id) do%>
            @<%= @tweet.user.name %>, <%= @tweet.created_at.strftime("%Y-%m-%d, %H:%M") %>
          <% end %>
        </h5>
        <p class="card-text"><%= @tweet.description %></p>
        <p class="card-text">
        <%= link_to tweet_replies_path(@tweet) do %>
          Reply (<%= @tweet.replies.count %>)
        <% end %>
        <% if not @tweet.is_liked?(current_user) %>
          <%= link_to like_tweet_path(@tweet), method: :post, class: "text-danger" do %>
            Like (<%= @tweet.likes.count %>)
          <% end %>
        <% else %>
          <%= link_to unlike_tweet_path(@tweet), method: :post, class: "text-danger"  do %>
            Unlike (<%= @tweet.likes.count %>)
          <% end %>
        <% end %>
        </p>
      </div>
    </div>

    <div class="mt-5"></div>

    <h3>Replies</h3>
    <div id="replies-list">
      <% @replies.each do |reply| %>
        <div class="card mt-3">
          <div class="card-body">
            <h5 class="card-title">
              <%= link_to tweets_user_path(reply.user.id) do%>
                @<%= reply.user.name %>, <%= reply.created_at.strftime("%Y-%m-%d, %H:%M") %>
              <% end %>
            </h5>
            <p class="card-text"><%= reply.comment %></p>
          </div>
        </div>
      <% end %>
   </div>

  <div class="mt-5"></div>

   <div id="reply-form">
      <%= form_for [@tweet, @reply] do |f| %>
        <div class="form-group">
          <%= f.text_area :comment, class: "form-control", rows: 5 %>
        </div>
        <div class="text-right">
          <%= f.submit "Reply", class: "btn btn-primary" %>
        </div>
      <% end %>
    </div>
  </div>
</div>
